<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shopify Dev Dashboard - Catalog</title>
    <link rel="stylesheet" href="dashboard.css">
</head>
<body>
    <div class="dashboard">
        <!-- Top Header -->
        <div class="top-header">
            <div class="logo-section">
                <img src="https://cdn.shopify.com/shopifycloud/shopify/assets/developer_dashboard/DevDashLogo-8818caf32c18eb9446a6b066b404e31fc335ad016860f250a2e431346530e4a5.svg" alt="dev dashboard" class="dev-dash-logo">
            </div>
        </div>

        <!-- Main Container -->
        <div class="main-container">
            <!-- Sidebar -->
            <div class="sidebar" data-page="catalog"></div>

            <!-- Content Area -->
            <div class="content">
                <!-- Content Header -->
                <div class="content-header">
                    <h1 class="content-title">Catalog</h1>
                </div>

                <!-- Catalog Info Section -->
                <div class="catalog-info">
                    <div class="info-section">
                        <h2 class="info-title">Shopify Catalog MCP Server</h2>
                        <p class="info-description">
                            The Shopify Catalog enables your AI agents to search across hundreds of millions of products from Shopify merchants. 
                            When buyers ask for products, your agent can search and display interactive product cards directly in the chat interface.
                        </p>
                        <p class="info-description">
                            Connect to the authenticated MCP server endpoint at <code class="inline-code">https://catalog.shopify.com/api/mcp</code> 
                            using your authorization bearer token. Results are standardized and clustered by UPI (Universal Product Identifier) 
                            to avoid duplicate products in search results.
                        </p>
                    </div>

                    <!-- Getting Started -->
                    <div class="getting-started-section full-width">
                        <input 
                            type="hidden" 
                            id="apiToken" 
                            value="eyJ0eXAiOiJKV1QiLCJhbGciOiJFUzI1NiJ9.eyJpc3MiOiJTaG9waWZ5Iiwic3ViIjoiOTRmM2Q1ZThjNTk3Mjc3YThkYzc4MWQ2MWNlYzQ0MDYiLCJpYXQiOjE3NjMwODM2ODksIm5iZiI6MTc2MzA4MzY4OSwiZXhwIjoxNzYzMDg3Mjg5LCJzY29wZXMiOiJyZWFkX2dsb2JhbF9hcGlfY2F0YWxvZ19zZWFyY2ggd3JpdGVfZ2xvYmFsX2FwaV91bml2ZXJzYWxfY2FydCIsImp0aSI6ImE4ZmJlNzVkLTZiYjUtNGNjYi05ZDJhLTg3NDk1N2QyZjQ1OCIsImxpbWl0cyI6eyJjYXJ0Ijp7Im1heCI6MTAwLCJwZXJpb2QiOjM2MDB9LCJjYXRhbG9nIjp7Im1heCI6MTAwLCJwZXJpb2QiOjM2MDB9fX0.cD4a2rKeByqTwLInl_KpOdX9jcjEAxPeeRTd3_oU505NXv9p49RmphyWSbPajQdVYKqq9gDZ6rYJzE3pvuXRcw"
                        >
                        <div class="getting-started-header">
                            <h3 class="getting-started-title">Getting Started</h3>
                            <div class="token-actions">
                                <a href="#" class="token-action-link" id="copyTokenLink">Copy Token</a>
                                <span class="token-action-separator">|</span>
                                <a href="#" class="token-action-link" id="rotateTokenLink">Rotate Token</a>
                            </div>
                        </div>
                        <p class="getting-started-description">
                            Test your API token with a sample search query
                        </p>
                        
                        <div class="code-block-wrapper">
                            <div class="code-block-container collapsed" id="codeBlockContainer">
                                <pre class="code-block" id="codeBlock"><code><span class="code-prompt">$</span> <span class="code-command">curl</span> <span class="code-flag">--location</span> <span class="code-string">'<span id="curlUrl">https://discover.shopifyapps.com/global/v1/search?query=glossier%20lip%20balm</span>'</span> <span class="code-escape">\</span>
  <span class="code-flag">--header</span> <span class="code-string">'Authorization: Bearer <span id="curlToken">API_TOKEN</span>'</span></code></pre>
                                <button class="copy-btn" id="copyBtn">
                                    <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <rect x="5.5" y="5.5" width="8" height="8" rx="1" stroke="currentColor" stroke-width="1.5"/>
                                        <path d="M2.5 10.5V3.5C2.5 2.94772 2.94772 2.5 3.5 2.5H10.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                                    </svg>
                                </button>
                            </div>
                            <button class="expand-btn" id="expandBtn">
                                <svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg" class="expand-icon">
                                    <path d="M3.5 5.5L7 9L10.5 5.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                </svg>
                            </button>
                        </div>
                    </div>

                    <!-- Key Features -->
                    <div class="features-section">
                        <h3 class="features-title">Key Features</h3>
                        <div class="features-grid">
                            <div class="feature-card">
                                <div class="feature-icon">üîç</div>
                                <h4 class="feature-name">Product Search</h4>
                                <p class="feature-desc">Search hundreds of millions of products with advanced filtering by price, category, availability, and shipping location.</p>
                            </div>
                            <div class="feature-card">
                                <div class="feature-icon">‚ú®</div>
                                <h4 class="feature-name">Interactive Results</h4>
                                <p class="feature-desc">Display product cards with images, prices, ratings, and add-to-cart buttons directly in your agent interface via MCP UI.</p>
                            </div>
                            <div class="feature-card feature-card-with-link">
                                <a href="#" class="feature-request-link">Request Access</a>
                                <div class="feature-icon">üõí</div>
                                <h4 class="feature-name">Universal Cart</h4>
                                <p class="feature-desc">Buyers can add items from multiple merchants to a single cart with automatic merchant grouping and unified checkout.</p>
                            </div>
                            <div class="feature-card feature-card-with-link">
                                <a href="#" class="feature-request-link">Request Access</a>
                                <div class="feature-icon">üîí</div>
                                <h4 class="feature-name">Checkout Kit</h4>
                                <p class="feature-desc">Complete merchant-branded checkout experiences with Checkout Kit, handling customizations, taxes, and compliance.</p>
                            </div>
                        </div>
                    </div>

                    <!-- Learn More -->
                    <div class="learn-more-section">
                        <h3 class="learn-more-title">Learn More</h3>
                        <p class="learn-more-description">
                            For detailed documentation on implementing the Shopify Catalog MCP server, including API reference, 
                            search parameters, and integration examples, visit the 
                            <a href="https://shopify.dev/docs/agents" target="_blank" class="external-link">Shopify Agents documentation</a>.
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script src="nav.js"></script>
    <script>
        // Token rotation functionality
        function generateRandomBase64UrlString(length) {
            const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_';
            let result = '';
            for (let i = 0; i < length; i++) {
                result += chars.charAt(Math.floor(Math.random() * chars.length));
            }
            return result;
        }

        function generateJWTToken() {
            // JWT format: header.payload.signature
            // Generate parts with similar lengths to a real JWT
            const header = generateRandomBase64UrlString(36);
            const payload = generateRandomBase64UrlString(400);
            const signature = generateRandomBase64UrlString(86);
            
            return `${header}.${payload}.${signature}`;
        }

        function updateCurlCommand() {
            const tokenInput = document.getElementById('apiToken');
            const curlToken = document.getElementById('curlToken');
            const token = tokenInput.value;
            
            curlToken.textContent = token;
        }

        // Initialize curl command on page load
        document.addEventListener('DOMContentLoaded', function() {
            updateCurlCommand();
        });

        // Copy to clipboard functionality
        document.getElementById('copyBtn').addEventListener('click', function() {
            const tokenInput = document.getElementById('apiToken');
            const token = tokenInput.value;
            const commandText = `curl --location 'https://discover.shopifyapps.com/global/v1/search?query=glossier%20lip%20balm' \\\n  --header 'Authorization: Bearer ${token}'`;
            
            navigator.clipboard.writeText(commandText).then(() => {
                // Visual feedback
                const originalHTML = this.innerHTML;
                this.innerHTML = '<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M3 8L6.5 11.5L13 4" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>';
                
                setTimeout(() => {
                    this.innerHTML = originalHTML;
                }, 1500);
            }).catch(err => {
                console.error('Failed to copy:', err);
            });
        });

        // Copy Token link
        document.getElementById('copyTokenLink').addEventListener('click', function(e) {
            e.preventDefault();
            const tokenInput = document.getElementById('apiToken');
            const token = tokenInput.value;
            
            navigator.clipboard.writeText(token).then(() => {
                // Visual feedback
                const originalText = this.textContent;
                this.textContent = 'Copied!';
                
                setTimeout(() => {
                    this.textContent = originalText;
                }, 1500);
            }).catch(err => {
                console.error('Failed to copy:', err);
            });
        });

        // Rotate Token link
        document.getElementById('rotateTokenLink').addEventListener('click', function(e) {
            e.preventDefault();
            const tokenInput = document.getElementById('apiToken');
            const newToken = generateJWTToken();
            tokenInput.value = newToken;
            
            // Update curl command with new token
            updateCurlCommand();
            
            // Visual feedback
            const originalText = this.textContent;
            this.textContent = 'Rotated!';
            setTimeout(() => {
                this.textContent = originalText;
            }, 1500);
        });

        // Expand/Collapse code block
        document.getElementById('expandBtn').addEventListener('click', function() {
            const container = document.getElementById('codeBlockContainer');
            container.classList.toggle('collapsed');
            container.classList.toggle('expanded');
        });
    </script>

    <!-- Checkout Coming Soon Modal -->
    <div class="checkout-modal" id="checkoutModal">
        <div class="checkout-modal-container">
            <div class="checkout-modal-header">
                <h2 class="checkout-modal-title">
                    Checkout
                    <span class="checkout-coming-soon-pill">Coming Soon</span>
                </h2>
                <button class="checkout-modal-close" onclick="hideCheckoutModal()" aria-label="Close modal">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M5 5L15 15M15 5L5 15" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                    </svg>
                </button>
            </div>
            <div class="checkout-modal-body">
                <img src="https://cdn.shopify.com/b/shopify-brochure2-assets/93d6a423270df1aaf36f348c2ad193d0.png" alt="Checkout Kit preview showing checkout on mobile, tablet and desktop" class="checkout-modal-image" />
                <div class="checkout-modal-content">
                    <p class="checkout-modal-description">
                        Checkout is often the hardest step due to merchant customizations and regulations. 
                        <span class="checkout-modal-highlight">Shopify's Checkout Kit</span> handles this for you. 
                        With a few lines of code, you get a high-converting checkout that preserves all your customizations and business rules.
                    </p>
                    <div class="checkout-features-list">
                        <div class="checkout-feature-item">
                            <svg class="checkout-feature-icon" width="20" height="20" viewBox="0 0 20 20" fill="none">
                                <path d="M7 10L9 12L13 8M19 10C19 14.9706 14.9706 19 10 19C5.02944 19 1 14.9706 1 10C1 5.02944 5.02944 1 10 1C14.9706 1 19 5.02944 19 10Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                            <span class="checkout-feature-text">Brand overrides for native look on any platform</span>
                        </div>
                        <div class="checkout-feature-item">
                            <svg class="checkout-feature-icon" width="20" height="20" viewBox="0 0 20 20" fill="none">
                                <path d="M7 10L9 12L13 8M19 10C19 14.9706 14.9706 19 10 19C5.02944 19 1 14.9706 1 10C1 5.02944 5.02944 1 10 1C14.9706 1 19 5.02944 19 10Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                            <span class="checkout-feature-text">Checkout UI Extensions and Shopify Functions preserved</span>
                        </div>
                        <div class="checkout-feature-item">
                            <svg class="checkout-feature-icon" width="20" height="20" viewBox="0 0 20 20" fill="none">
                                <path d="M7 10L9 12L13 8M19 10C19 14.9706 14.9706 19 10 19C5.02944 19 1 14.9706 1 10C1 5.02944 5.02944 1 10 1C14.9706 1 19 5.02944 19 10Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                            <span class="checkout-feature-text">Taxes automatically handled</span>
                        </div>
                        <div class="checkout-feature-item">
                            <svg class="checkout-feature-icon" width="20" height="20" viewBox="0 0 20 20" fill="none">
                                <path d="M7 10L9 12L13 8M19 10C19 14.9706 14.9706 19 10 19C5.02944 19 1 14.9706 1 10C1 5.02944 5.02944 1 10 1C14.9706 1 19 5.02944 19 10Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                            <span class="checkout-feature-text">Compliance simplified (GDPR, CCPA, WCAG, PCI DSS v4)</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>
</html>

