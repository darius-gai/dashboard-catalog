<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shopify Discovery API Playground</title>
    
    <!-- Highlight.js for syntax highlighting -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-dark.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/json.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/bash.min.js"></script>
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'SF Pro Text', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', sans-serif;
            background: #1C2128;
            min-height: 100vh;
            padding: 20px;
            color: #DFE3E8;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: #202731;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.4);
            overflow: hidden;
        }

        .header {
            background: #252E3A;
            color: #F6F6F7;
            padding: 24px 30px;
            text-align: center;
            border-bottom: 1px solid #2E3A4A;
        }

        .header h1 {
            font-size: 24px;
            margin-bottom: 6px;
            font-weight: 600;
            color: #F6F6F7;
        }

        .header p {
            font-size: 13px;
            color: #8C9196;
            font-weight: 400;
        }

        .columns {
            display: grid;
            grid-template-columns: 350px 1fr;
            gap: 0;
            min-height: calc(100vh - 200px);
        }

        .column {
            padding: 24px;
            border-right: 1px solid #2E3A4A;
            overflow-y: auto;
            background: #252E3A;
        }

        .column:last-child {
            border-right: none;
        }

        .column-title {
            font-size: 14px;
            font-weight: 600;
            margin-bottom: 20px;
            color: #F6F6F7;
            text-transform: uppercase;
            letter-spacing: 0.8px;
            padding-bottom: 12px;
            border-bottom: 1px solid #2E3A4A;
        }

        .filter-group {
            margin-bottom: 20px;
        }

        .filter-label {
            display: block;
            font-weight: 500;
            margin-bottom: 6px;
            color: #DFE3E8;
            font-size: 13px;
        }

        .instructions-link {
            color: #5CA8B8;
            text-decoration: none;
            font-size: 12px;
            font-weight: 400;
            margin-left: 8px;
            transition: color 0.2s ease;
        }

        .instructions-link:hover {
            color: #6BB8C8;
            text-decoration: underline;
        }

        .filter-description {
            font-size: 12px;
            color: #8C9196;
            margin-bottom: 6px;
            line-height: 1.5;
        }

        .filter-example {
            font-size: 11px;
            color: #6D7175;
            font-style: italic;
            margin-bottom: 8px;
        }

        input, select, textarea {
            width: 100%;
            padding: 8px 12px;
            border: 1px solid #3D4A5C;
            border-radius: 4px;
            font-size: 13px;
            font-family: inherit;
            transition: all 0.2s ease;
            background: #1C2128;
            color: #DFE3E8;
        }

        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: #5CA8B8;
            box-shadow: 0 0 0 1px #5CA8B8;
        }

        input::placeholder, textarea::placeholder {
            color: #6D7175;
        }

        textarea {
            resize: vertical;
            min-height: 100px;
            font-family: 'SF Pro Text', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', sans-serif;
            font-size: 13px;
            line-height: 1.5;
        }

        .url-input-group {
            display: flex;
            gap: 8px;
            align-items: stretch;
        }

        .url-box {
            background: #1C2128;
            padding: 12px;
            border-radius: 4px;
            border: 1px solid #3D4A5C;
            word-break: break-all;
            font-family: 'SF Mono', 'Monaco', 'Menlo', 'Courier New', monospace;
            font-size: 12px;
            line-height: 1.6;
            max-height: 150px;
            overflow-y: auto;
            margin-top: 8px;
            color: #5CA8B8;
            flex: 1;
        }

        .copy-url-inline-btn {
            background: #1C2128;
            color: #DFE3E8;
            border: 1px solid #3D4A5C;
            padding: 8px 12px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 13px;
            font-weight: 500;
            transition: all 0.2s ease;
            white-space: nowrap;
            margin-top: 8px;
            align-self: flex-start;
        }

        .copy-url-inline-btn:hover {
            background: #2B3139;
            border-color: #5CA8B8;
        }

        .copy-url-inline-btn:active {
            transform: scale(0.98);
        }

        .response-box {
            background: #1C2128;
            padding: 0;
            border-radius: 4px;
            border: 1px solid #3D4A5C;
            font-family: 'SF Mono', 'Monaco', 'Menlo', 'Courier New', monospace;
            font-size: 12px;
            line-height: 1.6;
            max-height: 400px;
            overflow-y: auto;
            margin-top: 8px;
            color: #DFE3E8;
        }

        .response-box pre {
            margin: 0;
            padding: 12px;
            background: transparent;
            border-radius: 4px;
        }

        .response-box code {
            font-family: 'SF Mono', 'Monaco', 'Menlo', 'Courier New', monospace;
            font-size: 12px;
            background: transparent;
        }

        .response-box .hljs {
            background: transparent;
            padding: 0;
        }

        .response-status {
            padding: 12px;
            border-bottom: 1px solid #3D4A5C;
            font-weight: 600;
        }

        .token-input-group {
            display: flex;
            gap: 8px;
            align-items: stretch;
        }

        .token-input-group input {
            flex: 1;
        }

        .generate-token-btn {
            background: #00A47C;
            color: #FFFFFF;
            border: none;
            padding: 8px 12px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 13px;
            font-weight: 500;
            transition: all 0.2s ease;
            white-space: nowrap;
        }

        .generate-token-btn:hover {
            background: #00B88A;
        }

        .generate-token-btn:active {
            transform: scale(0.98);
        }

        .generate-token-btn:disabled {
            background: #3D4A5C;
            cursor: not-allowed;
            color: #8C9196;
        }

        .copy-btn {
            background: #1C2128;
            color: #DFE3E8;
            border: 1px solid #3D4A5C;
            padding: 8px 16px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 13px;
            font-weight: 500;
            transition: all 0.2s ease;
            width: 100%;
            margin-top: 12px;
        }

        .copy-btn:hover {
            background: #2B3139;
            border-color: #5CA8B8;
        }

        .copy-btn:active {
            transform: scale(0.98);
        }

        .run-btn {
            background: #5CA8B8;
            color: #FFFFFF;
            border: none;
            padding: 10px 16px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 13px;
            font-weight: 500;
            transition: all 0.2s ease;
            width: 100%;
            margin-bottom: 16px;
            margin-top: 12px;
        }

        .run-btn:hover {
            background: #6BB8C8;
        }

        .run-btn:active {
            transform: scale(0.98);
        }

        .run-btn:disabled {
            background: #3D4A5C;
            cursor: not-allowed;
            transform: none;
            color: #8C9196;
        }

        .shorten-btn-inline {
            background: #00A47C;
            color: #FFFFFF;
            border: none;
            padding: 8px 12px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 13px;
            font-weight: 500;
            transition: all 0.2s ease;
            white-space: nowrap;
            margin-top: 8px;
            align-self: flex-start;
        }

        .shorten-btn-inline:hover {
            background: #00B88A;
        }

        .shorten-btn-inline:active {
            transform: scale(0.98);
        }

        .shorten-btn-inline:disabled {
            background: #3D4A5C;
            cursor: not-allowed;
            transform: none;
            color: #8C9196;
        }

        .output-url {
            background: #1C2128;
            border: 1px solid #3D4A5C;
            padding: 12px;
            border-radius: 4px;
            font-family: 'SF Mono', 'Monaco', 'Menlo', 'Courier New', monospace;
            font-size: 12px;
            word-break: break-all;
            color: #00E0A3;
            font-weight: 500;
            min-height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-top: 8px;
            flex: 1;
            max-height: 100px;
            overflow-y: auto;
        }

        .empty-state {
            text-align: center;
            color: #6D7175;
            font-style: italic;
            font-size: 12px;
        }

        .loading {
            color: #5CA8B8;
        }

        select option {
            background: #1C2128;
            color: #DFE3E8;
        }

        /* Scrollbar styling */
        .column::-webkit-scrollbar,
        .url-box::-webkit-scrollbar,
        .response-box::-webkit-scrollbar,
        .output-url::-webkit-scrollbar {
            width: 8px;
        }

        .column::-webkit-scrollbar-track,
        .url-box::-webkit-scrollbar-track,
        .response-box::-webkit-scrollbar-track,
        .output-url::-webkit-scrollbar-track {
            background: #1C2128;
        }

        .column::-webkit-scrollbar-thumb,
        .url-box::-webkit-scrollbar-thumb,
        .response-box::-webkit-scrollbar-thumb,
        .output-url::-webkit-scrollbar-thumb {
            background: #3D4A5C;
            border-radius: 4px;
        }

        .column::-webkit-scrollbar-thumb:hover,
        .url-box::-webkit-scrollbar-thumb:hover,
        .response-box::-webkit-scrollbar-thumb:hover,
        .output-url::-webkit-scrollbar-thumb:hover {
            background: #4A5768;
        }

        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            animation: fadeIn 0.2s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .modal-content {
            background-color: #252E3A;
            margin: 5% auto;
            border: 1px solid #3D4A5C;
            border-radius: 8px;
            width: 90%;
            max-width: 600px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.5);
            animation: slideDown 0.3s ease;
        }

        @keyframes slideDown {
            from {
                transform: translateY(-50px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        .modal-header {
            padding: 20px 24px;
            border-bottom: 1px solid #3D4A5C;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .modal-header h3 {
            margin: 0;
            color: #F6F6F7;
            font-size: 18px;
            font-weight: 600;
        }

        .modal-close {
            color: #8C9196;
            font-size: 32px;
            font-weight: 300;
            line-height: 1;
            cursor: pointer;
            transition: color 0.2s ease;
        }

        .modal-close:hover {
            color: #DFE3E8;
        }

        .modal-body {
            padding: 24px;
            color: #DFE3E8;
        }

        .modal-body p {
            margin-bottom: 16px;
            line-height: 1.6;
        }

        .modal-body ol {
            margin: 16px 0;
            padding-left: 24px;
        }

        .modal-body li {
            margin-bottom: 8px;
            line-height: 1.6;
        }

        .modal-body code {
            background: #1C2128;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: 'SF Mono', 'Monaco', monospace;
            font-size: 12px;
            color: #5CA8B8;
        }

        .code-block {
            background: #282c34;
            border: 1px solid #3D4A5C;
            border-radius: 4px;
            padding: 0;
            margin: 16px 0;
            overflow-x: auto;
        }

        .code-block pre {
            margin: 0;
            padding: 16px;
            font-family: 'SF Mono', 'Monaco', monospace;
            font-size: 12px;
            line-height: 1.6;
            background: transparent;
        }

        .code-block code {
            background: transparent;
            padding: 0;
            font-family: 'SF Mono', 'Monaco', monospace;
        }

        .code-block .hljs {
            background: transparent;
            padding: 0;
        }

        .copy-code-btn {
            background: #00A47C;
            color: #FFFFFF;
            border: none;
            padding: 10px 16px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 13px;
            font-weight: 500;
            transition: all 0.2s ease;
            margin-top: 16px;
        }

        .copy-code-btn:hover {
            background: #00B88A;
        }

        .copy-code-btn:active {
            transform: scale(0.98);
        }

        @media (max-width: 1024px) {
            .columns {
                grid-template-columns: 1fr;
            }

            .column {
                border-right: none;
                border-bottom: 1px solid #2E3A4A;
            }

            .column:last-child {
                border-bottom: none;
            }

            .modal-content {
                width: 95%;
                margin: 10% auto;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üõçÔ∏è Configure Catalog</h1>
            <p>Configure filters, build your URL, and generate a shortened link</p>
        </div>

        <div class="columns">
            <!-- Filters Column -->
            <div class="column">
                <h2 class="column-title">Filters</h2>

                <div class="filter-group">
                    <label class="filter-label">query</label>
                    <p class="filter-description">Keyword(s) for search</p>
                    <p class="filter-example">Example: Running Shoes</p>
                    <input type="text" id="query" placeholder="Running Shoes" value="Running shoes">
                </div>

                <div class="filter-group">
                    <label class="filter-label">limit</label>
                    <p class="filter-description">Maximum number of results to return (defaults to 10, max of 10)</p>
                    <p class="filter-example">Example: 5</p>
                    <input type="number" id="limit" min="1" max="10" placeholder="10">
                </div>

                <div class="filter-group">
                    <label class="filter-label">min_price</label>
                    <p class="filter-description">Min price of products to return. Currency determined by ships_to parameter. API accepts decimals.</p>
                    <p class="filter-example">Example: 10</p>
                    <input type="number" id="min_price" step="0.01" placeholder="10">
                </div>

                <div class="filter-group">
                    <label class="filter-label">max_price</label>
                    <p class="filter-description">Max price of products to return. Currency determined by ships_to parameter. API accepts decimals.</p>
                    <p class="filter-example">Example: 100</p>
                    <input type="number" id="max_price" step="0.01" placeholder="100">
                </div>

                <div class="filter-group">
                    <label class="filter-label">categories</label>
                    <p class="filter-description">Comma delimited list of global ids for taxonomy categories.</p>
                    <p class="filter-example">Example: gid://shopify/TaxonomyCategory/aa-8</p>
                    <input type="text" id="categories" placeholder="gid://shopify/TaxonomyCategory/aa-8">
                </div>

                <div class="filter-group">
                    <label class="filter-label">ships_to</label>
                    <p class="filter-description">A single iso_code that country code is extracted from (defaults to US)</p>
                    <p class="filter-example">Example: US</p>
                    <input type="text" id="ships_to" placeholder="US" maxlength="2">
                </div>

                <div class="filter-group">
                    <label class="filter-label">ships_from</label>
                    <p class="filter-description">A single iso_code that country code is extracted from</p>
                    <p class="filter-example">Example: US</p>
                    <input type="text" id="ships_from" placeholder="US" maxlength="2">
                </div>

                <div class="filter-group">
                    <label class="filter-label">available_for_sale</label>
                    <p class="filter-description">Whether to filter available for sale (defaults to 1)</p>
                    <p class="filter-example">0 = false, 1 = true</p>
                    <select id="available_for_sale">
                        <option value="">-- Select --</option>
                        <option value="0">0 (include not available)</option>
                        <option value="1">1 (exclude not available)</option>
                    </select>
                </div>

                <div class="filter-group">
                    <label class="filter-label">context</label>
                    <p class="filter-description">Any additional context on the query that can help surface more relevant results</p>
                    <p class="filter-example">Example: The user is trying to plan a birthday party for a 6 year old.</p>
                    <textarea id="context" placeholder="The user is trying to plan a birthday party for a 6 year old."></textarea>
                </div>

                <div class="filter-group">
                    <label class="filter-label">include_secondhand</label>
                    <p class="filter-description">Whether to include secondhand products (defaults to 1)</p>
                    <p class="filter-example">0 = false, 1 = true</p>
                    <select id="include_secondhand">
                        <option value="">-- Select --</option>
                        <option value="0">0 (exclude secondhand)</option>
                        <option value="1">1 (include secondhand)</option>
                    </select>
                </div>

                <div class="filter-group">
                    <label class="filter-label">shop_ids</label>
                    <p class="filter-description">Whether to filter by provided shops</p>
                    <p class="filter-example">Example: gid://shopify/Shop/1234 or 1234</p>
                    <input type="text" id="shop_ids" placeholder="gid://shopify/Shop/1234">
                </div>
            </div>

            <!-- Playground Column -->
            <div class="column">
                <h2 class="column-title">Playground</h2>
                
                <div class="filter-group">
                    <label class="filter-label">
                        Token 
                        <a href="#" class="instructions-link" onclick="showTokenModal(event)">Instructions</a>
                    </label>
                    <input type="text" id="token" placeholder="Enter your API token">
                </div>

                <div class="filter-group">
                    <label class="filter-label">
                        URL 
                        <a href="#" class="instructions-link" onclick="generateAndCopyShortUrl(event)">Generate Short URL</a>
                    </label>
                    <div class="url-input-group">
                        <div class="url-box" id="urlDisplay">https://discover.shopifyapps.com/global/v1/search?</div>
                        <button class="copy-url-inline-btn" onclick="copyUrl(this)">üìã Copy</button>
                    </div>
                </div>
                
                <button class="run-btn" onclick="runApiRequest(this)">‚ñ∂Ô∏è Run</button>

                <div class="filter-group">
                    <label class="filter-label">Response</label>
                    <div class="response-box" id="responseDisplay"><pre><code class="language-json">[
  {
    "id": "gid://shopify/p/2uAJPOxc72w6vUrAKAuvzq",
    "title": "Asics MetaRide Mens Running Shoes - Black",
    "description": "High-performance running shoes engineered for long-distance comfort, efficiency, and durability.",
    "images": [
      {
        "url": "https://cdn.shopify.com/s/files/1/0564/9521/0704/files/Asics-Metaride-1011A142-002.jpg?v=1721986320",
        "altText": "Asics MetaRide Mens Running Shoes - Black",
        "product": {
          "id": "gid://shopify/Product/8089051037904",
          "title": "Asics MetaRide Mens Running Shoes - Black",
          "onlineStoreUrl": "https://startfitness.co.uk/products/asics-metaride-mens-running-shoes-black?variant=44022806511824&_gsid=RTya5redrMc6",
          "shop": {
            "name": "Start Fitness",
            "onlineStoreUrl": "https://startfitness.co.uk"
          }
        }
      }
    ],
    "options": [
      {
        "name": "Shoe size",
        "values": [
          {
            "value": "UK 6.5",
            "availableForSale": true,
            "exists": true
          },
          {
            "value": "UK 7.5",
            "availableForSale": true,
            "exists": true
          },
          {
            "value": "UK 8",
            "availableForSale": true,
            "exists": true
          },
          {
            "value": "UK 8.5",
            "availableForSale": true,
            "exists": true
          },
          {
            "value": "UK 9.5",
            "availableForSale": true,
            "exists": true
          }
        ]
      }
    ],
    "priceRange": {
      "min": {
        "amount": "104.9984901019",
        "currencyCode": "USD"
      },
      "max": {
        "amount": "104.9984901019",
        "currencyCode": "USD"
      }
    },
    "products": [
      {
        "id": "gid://shopify/Product/8089051037904",
        "title": "Asics MetaRide Mens Running Shoes - Black",
        "checkoutUrl": "https://startfitness.co.uk/cart/44022806511824:1?_gsid=RTya5redrMc6&payment=shop_pay",
        "description": "Take on longer distances in comfort with the men's METARIDE‚Ñ¢ performance road running shoe by ASICS. Engineered for those who want to go further, it boasts an efficient, streamlined design which combines with plush, energized cushioning underfoot to create a luxurious running experience.FLYTEFOAM¬Æ Propel technology in the sole of the shoe combines a lightweight foam construction with high-energy return, for increased bounce and toe-off. You'll experience a smooth transition from heel to toe thanks to the subtle curvature of the sole, while the clutch counter wraps your ankle for carefully controlled movement, helping you retain muscle energy even over long distances.The rear of the shoe features GEL¬Æ technology, for shock absorption on hard surfaces. Additional cushioned comfort is provided by the circular knit upper, while the gripsole rubber outsole means you'll feel confident to tackle long distances.With all of these high-tech features combined into one stylish distance running shoe, you can be sure that the METARIDE‚Ñ¢ shoe will take you further than before. Features: Circular Knit Uppers - Ensures lightweight, breathable and supportive comfort. MetaClutch - An external heel counter which secures the rearfoot for a non-slip fit. Traditional Lacing System - Locks in the midfoot. FlyteFoam - Lightweight and responsive, it features a reinforced, sustainable nanofibre compound which increases the foam's durability and provides more stability. FlyteFoam Propel - Designed to provide enhanced responsiveness at toe-off. Rearfoot GEL Cushioning Systems - Attenuate shock at heel-strike and toe-off plus promote a smooth transition through the gait cycle. 3D Guidance Line - Vertical flex groove works to enhance gait efficiency. GuideSole - Increases traction and durability whilst remaining lightweight. Curved Outsole - Increases running efficiency and reduces ankle flexion. Weight - 300g.",
        "featuredImage": {
          "url": "https://cdn.shopify.com/s/files/1/0564/9521/0704/files/Asics-Metaride-1011A142-002.jpg?v=1721986320",
          "altText": "Asics MetaRide Mens Running Shoes - Black"
        },
        "onlineStoreUrl": "https://startfitness.co.uk/products/asics-metaride-mens-running-shoes-black?variant=44022806511824&_gsid=RTya5redrMc6",
        "price": {
          "amount": "104.9984901019",
          "currencyCode": "USD"
        },
        "rating": {
          "value": 4.840000152587891,
          "count": 19
        },
        "availableForSale": true,
        "shop": {
          "name": "Start Fitness",
          "paymentSettings": {
            "supportedDigitalWallets": [
              "SHOPIFY_PAY"
            ],
            "acceptedCardBrands": [
              "visa",
              "master",
              "american_express",
              "discover",
              "diners_club",
              "visadebit",
              "masterdebit"
            ]
          },
          "onlineStoreUrl": "https://startfitness.co.uk",
          "privacyPolicy": {
            "url": "https://checkout.shopify.com/56495210704/policies/23902355664.html?locale=en"
          },
          "refundPolicy": {
            "url": "https://checkout.shopify.com/56495210704/policies/23902322896.html?locale=en"
          },
          "termsOfService": {
            "url": "https://checkout.shopify.com/56495210704/policies/23902388432.html?locale=en"
          },
          "shippingPolicy": {
            "url": "https://checkout.shopify.com/56495210704/policies/23902421200.html?locale=en"
          },
          "id": "gid://shopify/Shop/56495210704"
        },
        "selectedProductVariant": {
          "id": "gid://shopify/ProductVariant/44022806511824?shop=56495210704",
          "availableForSale": true,
          "options": [
            {
              "name": "Shoe size",
              "value": "UK 6.5"
            }
          ],
          "price": {
            "amount": "104.9984901019",
            "currencyCode": "USD"
          },
          "image": {
            "url": "https://cdn.shopify.com/s/files/1/0564/9521/0704/files/Asics-Metaride-1011A142-002.jpg?v=1721986320",
            "altText": "Asics MetaRide Mens Running Shoes - Black"
          }
        },
        "secondhand": false,
        "requiresSellingPlan": false
      },
      {
        "id": "gid://shopify/Product/8089051037904",
        "title": "Asics MetaRide Mens Running Shoes - Black",
        "checkoutUrl": "https://startfitness.co.uk/cart/44022806577360:1?_gsid=RTya5redrMc6&payment=shop_pay",
        "description": "Take on longer distances in comfort with the men's METARIDE‚Ñ¢ performance road running shoe by ASICS. Engineered for those who want to go further, it boasts an efficient, streamlined design which combines with plush, energized cushioning underfoot to create a luxurious running experience.FLYTEFOAM¬Æ Propel technology in the sole of the shoe combines a lightweight foam construction with high-energy return, for increased bounce and toe-off. You'll experience a smooth transition from heel to toe thanks to the subtle curvature of the sole, while the clutch counter wraps your ankle for carefully controlled movement, helping you retain muscle energy even over long distances.The rear of the shoe features GEL¬Æ technology, for shock absorption on hard surfaces. Additional cushioned comfort is provided by the circular knit upper, while the gripsole rubber outsole means you'll feel confident to tackle long distances.With all of these high-tech features combined into one stylish distance running shoe, you can be sure that the METARIDE‚Ñ¢ shoe will take you further than before. Features: Circular Knit Uppers - Ensures lightweight, breathable and supportive comfort. MetaClutch - An external heel counter which secures the rearfoot for a non-slip fit. Traditional Lacing System - Locks in the midfoot. FlyteFoam - Lightweight and responsive, it features a reinforced, sustainable nanofibre compound which increases the foam's durability and provides more stability. FlyteFoam Propel - Designed to provide enhanced responsiveness at toe-off. Rearfoot GEL Cushioning Systems - Attenuate shock at heel-strike and toe-off plus promote a smooth transition through the gait cycle. 3D Guidance Line - Vertical flex groove works to enhance gait efficiency. GuideSole - Increases traction and durability whilst remaining lightweight. Curved Outsole - Increases running efficiency and reduces ankle flexion. Weight - 300g.",
        "featuredImage": {
          "url": "https://cdn.shopify.com/s/files/1/0564/9521/0704/files/Asics-Metaride-1011A142-002.jpg?v=1721986320",
          "altText": "Asics MetaRide Mens Running Shoes - Black"
        },
        "onlineStoreUrl": "https://startfitness.co.uk/products/asics-metaride-mens-running-shoes-black?variant=44022806577360&_gsid=RTya5redrMc6",
        "price": {
          "amount": "104.9984901019",
          "currencyCode": "USD"
        },
        "rating": {
          "value": 4.840000152587891,
          "count": 19
        },
        "availableForSale": true,
        "shop": {
          "name": "Start Fitness",
          "paymentSettings": {
            "supportedDigitalWallets": [
              "SHOPIFY_PAY"
            ],
            "acceptedCardBrands": [
              "visa",
              "master",
              "american_express",
              "discover",
              "diners_club",
              "visadebit",
              "masterdebit"
            ]
          },
          "onlineStoreUrl": "https://startfitness.co.uk",
          "privacyPolicy": {
            "url": "https://checkout.shopify.com/56495210704/policies/23902355664.html?locale=en"
          },
          "refundPolicy": {
            "url": "https://checkout.shopify.com/56495210704/policies/23902322896.html?locale=en"
          },
          "termsOfService": {
            "url": "https://checkout.shopify.com/56495210704/policies/23902388432.html?locale=en"
          },
          "shippingPolicy": {
            "url": "https://checkout.shopify.com/56495210704/policies/23902421200.html?locale=en"
          },
          "id": "gid://shopify/Shop/56495210704"
        },
        "selectedProductVariant": {
          "id": "gid://shopify/ProductVariant/44022806577360?shop=56495210704",
          "availableForSale": true,
          "options": [
            {
              "name": "Shoe size",
              "value": "UK 7.5"
            }
          ],
          "price": {
            "amount": "104.9984901019",
            "currencyCode": "USD"
          },
          "image": {
            "url": "https://cdn.shopify.com/s/files/1/0564/9521/0704/files/Asics-Metaride-1011A142-002.jpg?v=1721986320",
            "altText": "Asics MetaRide Mens Running Shoes - Black"
          }
        },
        "secondhand": false,
        "requiresSellingPlan": false
      },
      {
        "id": "gid://shopify/Product/8089051037904",
        "title": "Asics MetaRide Mens Running Shoes - Black",
        "checkoutUrl": "https://startfitness.co.uk/cart/44022806610128:1?_gsid=RTya5redrMc6&payment=shop_pay",
        "description": "Take on longer distances in comfort with the men's METARIDE‚Ñ¢ performance road running shoe by ASICS. Engineered for those who want to go further, it boasts an efficient, streamlined design which combines with plush, energized cushioning underfoot to create a luxurious running experience.FLYTEFOAM¬Æ Propel technology in the sole of the shoe combines a lightweight foam construction with high-energy return, for increased bounce and toe-off. You'll experience a smooth transition from heel to toe thanks to the subtle curvature of the sole, while the clutch counter wraps your ankle for carefully controlled movement, helping you retain muscle energy even over long distances.The rear of the shoe features GEL¬Æ technology, for shock absorption on hard surfaces. Additional cushioned comfort is provided by the circular knit upper, while the gripsole rubber outsole means you'll feel confident to tackle long distances.With all of these high-tech features combined into one stylish distance running shoe, you can be sure that the METARIDE‚Ñ¢ shoe will take you further than before. Features: Circular Knit Uppers - Ensures lightweight, breathable and supportive comfort. MetaClutch - An external heel counter which secures the rearfoot for a non-slip fit. Traditional Lacing System - Locks in the midfoot. FlyteFoam - Lightweight and responsive, it features a reinforced, sustainable nanofibre compound which increases the foam's durability and provides more stability. FlyteFoam Propel - Designed to provide enhanced responsiveness at toe-off. Rearfoot GEL Cushioning Systems - Attenuate shock at heel-strike and toe-off plus promote a smooth transition through the gait cycle. 3D Guidance Line - Vertical flex groove works to enhance gait efficiency. GuideSole - Increases traction and durability whilst remaining lightweight. Curved Outsole - Increases running efficiency and reduces ankle flexion. Weight - 300g.",
        "featuredImage": {
          "url": "https://cdn.shopify.com/s/files/1/0564/9521/0704/files/Asics-Metaride-1011A142-002.jpg?v=1721986320",
          "altText": "Asics MetaRide Mens Running Shoes - Black"
        },
        "onlineStoreUrl": "https://startfitness.co.uk/products/asics-metaride-mens-running-shoes-black?variant=44022806610128&_gsid=RTya5redrMc6",
        "price": {
          "amount": "104.9984901019",
          "currencyCode": "USD"
        },
        "rating": {
          "value": 4.840000152587891,
          "count": 19
        },
        "availableForSale": true,
        "shop": {
          "name": "Start Fitness",
          "paymentSettings": {
            "supportedDigitalWallets": [
              "SHOPIFY_PAY"
            ],
            "acceptedCardBrands": [
              "visa",
              "master",
              "american_express",
              "discover",
              "diners_club",
              "visadebit",
              "masterdebit"
            ]
          },
          "onlineStoreUrl": "https://startfitness.co.uk",
          "privacyPolicy": {
            "url": "https://checkout.shopify.com/56495210704/policies/23902355664.html?locale=en"
          },
          "refundPolicy": {
            "url": "https://checkout.shopify.com/56495210704/policies/23902322896.html?locale=en"
          },
          "termsOfService": {
            "url": "https://checkout.shopify.com/56495210704/policies/23902388432.html?locale=en"
          },
          "shippingPolicy": {
            "url": "https://checkout.shopify.com/56495210704/policies/23902421200.html?locale=en"
          },
          "id": "gid://shopify/Shop/56495210704"
        },
        "selectedProductVariant": {
          "id": "gid://shopify/ProductVariant/44022806610128?shop=56495210704",
          "availableForSale": true,
          "options": [
            {
              "name": "Shoe size",
              "value": "UK 8"
            }
          ],
          "price": {
            "amount": "104.9984901019",
            "currencyCode": "USD"
          },
          "image": {
            "url": "https://cdn.shopify.com/s/files/1/0564/9521/0704/files/Asics-Metaride-1011A142-002.jpg?v=1721986320",
            "altText": "Asics MetaRide Mens Running Shoes - Black"
          }
        },
        "secondhand": false,
        "requiresSellingPlan": false
      },
      {
        "id": "gid://shopify/Product/8089051037904",
        "title": "Asics MetaRide Mens Running Shoes - Black",
        "checkoutUrl": "https://startfitness.co.uk/cart/44022806642896:1?_gsid=RTya5redrMc6&payment=shop_pay",
        "description": "Take on longer distances in comfort with the men's METARIDE‚Ñ¢ performance road running shoe by ASICS. Engineered for those who want to go further, it boasts an efficient, streamlined design which combines with plush, energized cushioning underfoot to create a luxurious running experience.FLYTEFOAM¬Æ Propel technology in the sole of the shoe combines a lightweight foam construction with high-energy return, for increased bounce and toe-off. You'll experience a smooth transition from heel to toe thanks to the subtle curvature of the sole, while the clutch counter wraps your ankle for carefully controlled movement, helping you retain muscle energy even over long distances.The rear of the shoe features GEL¬Æ technology, for shock absorption on hard surfaces. Additional cushioned comfort is provided by the circular knit upper, while the gripsole rubber outsole means you'll feel confident to tackle long distances.With all of these high-tech features combined into one stylish distance running shoe, you can be sure that the METARIDE‚Ñ¢ shoe will take you further than before. Features: Circular Knit Uppers - Ensures lightweight, breathable and supportive comfort. MetaClutch - An external heel counter which secures the rearfoot for a non-slip fit. Traditional Lacing System - Locks in the midfoot. FlyteFoam - Lightweight and responsive, it features a reinforced, sustainable nanofibre compound which increases the foam's durability and provides more stability. FlyteFoam Propel - Designed to provide enhanced responsiveness at toe-off. Rearfoot GEL Cushioning Systems - Attenuate shock at heel-strike and toe-off plus promote a smooth transition through the gait cycle. 3D Guidance Line - Vertical flex groove works to enhance gait efficiency. GuideSole - Increases traction and durability whilst remaining lightweight. Curved Outsole - Increases running efficiency and reduces ankle flexion. Weight - 300g.",
        "featuredImage": {
          "url": "https://cdn.shopify.com/s/files/1/0564/9521/0704/files/Asics-Metaride-1011A142-002.jpg?v=1721986320",
          "altText": "Asics MetaRide Mens Running Shoes - Black"
        },
        "onlineStoreUrl": "https://startfitness.co.uk/products/asics-metaride-mens-running-shoes-black?variant=44022806642896&_gsid=RTya5redrMc6",
        "price": {
          "amount": "104.9984901019",
          "currencyCode": "USD"
        },
        "rating": {
          "value": 4.840000152587891,
          "count": 19
        },
        "availableForSale": true,
        "shop": {
          "name": "Start Fitness",
          "paymentSettings": {
            "supportedDigitalWallets": [
              "SHOPIFY_PAY"
            ],
            "acceptedCardBrands": [
              "visa",
              "master",
              "american_express",
              "discover",
              "diners_club",
              "visadebit",
              "masterdebit"
            ]
          },
          "onlineStoreUrl": "https://startfitness.co.uk",
          "privacyPolicy": {
            "url": "https://checkout.shopify.com/56495210704/policies/23902355664.html?locale=en"
          },
          "refundPolicy": {
            "url": "https://checkout.shopify.com/56495210704/policies/23902322896.html?locale=en"
          },
          "termsOfService": {
            "url": "https://checkout.shopify.com/56495210704/policies/23902388432.html?locale=en"
          },
          "shippingPolicy": {
            "url": "https://checkout.shopify.com/56495210704/policies/23902421200.html?locale=en"
          },
          "id": "gid://shopify/Shop/56495210704"
        },
        "selectedProductVariant": {
          "id": "gid://shopify/ProductVariant/44022806642896?shop=56495210704",
          "availableForSale": true,
          "options": [
            {
              "name": "Shoe size",
              "value": "UK 8.5"
            }
          ],
          "price": {
            "amount": "104.9984901019",
            "currencyCode": "USD"
          },
          "image": {
            "url": "https://cdn.shopify.com/s/files/1/0564/9521/0704/files/Asics-Metaride-1011A142-002.jpg?v=1721986320",
            "altText": "Asics MetaRide Mens Running Shoes - Black"
          }
        },
        "secondhand": false,
        "requiresSellingPlan": false
      },
      {
        "id": "gid://shopify/Product/8089051037904",
        "title": "Asics MetaRide Mens Running Shoes - Black",
        "checkoutUrl": "https://startfitness.co.uk/cart/44022806708432:1?_gsid=RTya5redrMc6&payment=shop_pay",
        "description": "Take on longer distances in comfort with the men's METARIDE‚Ñ¢ performance road running shoe by ASICS. Engineered for those who want to go further, it boasts an efficient, streamlined design which combines with plush, energized cushioning underfoot to create a luxurious running experience.FLYTEFOAM¬Æ Propel technology in the sole of the shoe combines a lightweight foam construction with high-energy return, for increased bounce and toe-off. You'll experience a smooth transition from heel to toe thanks to the subtle curvature of the sole, while the clutch counter wraps your ankle for carefully controlled movement, helping you retain muscle energy even over long distances.The rear of the shoe features GEL¬Æ technology, for shock absorption on hard surfaces. Additional cushioned comfort is provided by the circular knit upper, while the gripsole rubber outsole means you'll feel confident to tackle long distances.With all of these high-tech features combined into one stylish distance running shoe, you can be sure that the METARIDE‚Ñ¢ shoe will take you further than before. Features: Circular Knit Uppers - Ensures lightweight, breathable and supportive comfort. MetaClutch - An external heel counter which secures the rearfoot for a non-slip fit. Traditional Lacing System - Locks in the midfoot. FlyteFoam - Lightweight and responsive, it features a reinforced, sustainable nanofibre compound which increases the foam's durability and provides more stability. FlyteFoam Propel - Designed to provide enhanced responsiveness at toe-off. Rearfoot GEL Cushioning Systems - Attenuate shock at heel-strike and toe-off plus promote a smooth transition through the gait cycle. 3D Guidance Line - Vertical flex groove works to enhance gait efficiency. GuideSole - Increases traction and durability whilst remaining lightweight. Curved Outsole - Increases running efficiency and reduces ankle flexion. Weight - 300g.",
        "featuredImage": {
          "url": "https://cdn.shopify.com/s/files/1/0564/9521/0704/files/Asics-Metaride-1011A142-002.jpg?v=1721986320",
          "altText": "Asics MetaRide Mens Running Shoes - Black"
        },
        "onlineStoreUrl": "https://startfitness.co.uk/products/asics-metaride-mens-running-shoes-black?variant=44022806708432&_gsid=RTya5redrMc6",
        "price": {
          "amount": "104.9984901019",
          "currencyCode": "USD"
        },
        "rating": {
          "value": 4.840000152587891,
          "count": 19
        },
        "availableForSale": true,
        "shop": {
          "name": "Start Fitness",
          "paymentSettings": {
            "supportedDigitalWallets": [
              "SHOPIFY_PAY"
            ],
            "acceptedCardBrands": [
              "visa",
              "master",
              "american_express",
              "discover",
              "diners_club",
              "visadebit",
              "masterdebit"
            ]
          },
          "onlineStoreUrl": "https://startfitness.co.uk",
          "privacyPolicy": {
            "url": "https://checkout.shopify.com/56495210704/policies/23902355664.html?locale=en"
          },
          "refundPolicy": {
            "url": "https://checkout.shopify.com/56495210704/policies/23902322896.html?locale=en"
          },
          "termsOfService": {
            "url": "https://checkout.shopify.com/56495210704/policies/23902388432.html?locale=en"
          },
          "shippingPolicy": {
            "url": "https://checkout.shopify.com/56495210704/policies/23902421200.html?locale=en"
          },
          "id": "gid://shopify/Shop/56495210704"
        },
        "selectedProductVariant": {
          "id": "gid://shopify/ProductVariant/44022806708432?shop=56495210704",
          "availableForSale": true,
          "options": [
            {
              "name": "Shoe size",
              "value": "UK 9.5"
            }
          ],
          "price": {
            "amount": "104.9984901019",
            "currencyCode": "USD"
          },
          "image": {
            "url": "https://cdn.shopify.com/s/files/1/0564/9521/0704/files/Asics-Metaride-1011A142-002.jpg?v=1721986320",
            "altText": "Asics MetaRide Mens Running Shoes - Black"
          }
        },
        "secondhand": false,
        "requiresSellingPlan": false
      }
    ],
    "availableForSale": true,
    "rating": {
      "value": 4.800000190734863,
      "count": 19
    },
    "inferredFields": [
      "options",
      "products.secondhand",
      "products.selectedProductVariant.options",
      "techSpecs",
      "sharedAttributes",
      "uniqueSellingPoint",
      "topFeatures"
    ],
    "uniqueSellingPoint": "Combines FlyteFoam Propel technology, MetaClutch heel support, and Gel cushioning for optimal energy return and shock absorption on long runs.",
    "topFeatures": [
      "FlyteFoam Propel midsole delivers lightweight cushioning and high energy return for efficient energy transfer",
      "MetaClutch external heel counter secures the rearfoot for a non-slip, stable fit",
      "Gel cushioning in the rearfoot absorbs shock at heel strike and toe-off for reduced impact",
      "Guidesole curved outsole promotes efficient running gait and reduces ankle flexion",
      "Breathable circular knit upper enhances comfort and ventilation during long runs"
    ],
    "techSpecs": [
      "Weight: 300 g",
      "Upper Material: Circular knit mesh",
      "Outsole: AHA rubber",
      "Midsole: FlyteFoam Propel with Gel cushioning",
      "Closure Type: Lace-up",
      "Sockliner: OrthoLite X40 (removable)"
    ],
    "sharedAttributes": [
      {
        "name": "Activity",
        "values": [
          "Running"
        ]
      },
      {
        "name": "Age group",
        "values": [
          "Adults"
        ]
      },
      {
        "name": "Color",
        "values": [
          "Black"
        ]
      },
      {
        "name": "Target gender",
        "values": [
          "Male"
        ]
      },
      {
        "name": "Shoe features",
        "values": [
          "Breathable design",
          "Cushioned",
          "Lightweight"
        ]
      },
      {
        "name": "Footwear material",
        "values": [
          "Mesh",
          "Rubber",
          "Synthetic"
        ]
      },
      {
        "name": "Closure type",
        "values": [
          "Lace-up"
        ]
      },
      {
        "name": "Toe style",
        "values": [
          "Round"
        ]
      },
      {
        "name": "Shoe fit",
        "values": [
          "Regular"
        ]
      },
      {
        "name": "Sub Brand",
        "values": [
          "MetaRide"
        ]
      },
      {
        "name": "Pattern",
        "values": [
          "Solid"
        ]
      }
    ],
    "url": "https://discover.shopifyapps.com/global/v1/p/2uAJPOxc72w6vUrAKAuvzq?_gsid=RTya5redrMc6&available_for_sale=1&product_id=8089051037904&query=running+shoes&ships_to=US&variant_id=44022806511824"
  }
]</code></pre></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Token Instructions Modal -->
    <div id="tokenModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>How to Generate an API Token</h3>
                <span class="modal-close" onclick="closeTokenModal()">&times;</span>
            </div>
            <div class="modal-body">
                <p>To generate an API token, run the following curl command in your terminal:</p>
                
                <div class="code-block">
                    <pre><code class="language-bash">curl --request POST \
  --url https://api.shopify.com/auth/access_token \
  --header 'Content-Type: application/json' \
  --data '{
    "client_id": "94f3d5e8c597277a8dc781d61cec4406",
    "client_secret": "d3344c26514c7425bed3c386ff15b378",
    "grant_type": "client_credentials"
  }'</code></pre>
                </div>

                <p><strong>Steps:</strong></p>
                <ol>
                    <li>Open your terminal</li>
                    <li>Copy and paste the command above</li>
                    <li>Press Enter to execute</li>
                    <li>Copy the <code>access_token</code> value from the response</li>
                    <li>Paste it into the Token field</li>
                </ol>

                <button class="copy-code-btn" onclick="copyTokenCommand(this)">üìã Copy Command</button>
            </div>
        </div>
    </div>

    <script>
        // Initialize syntax highlighting on page load
        document.addEventListener('DOMContentLoaded', function() {
            hljs.highlightAll();
        });
    </script>

    <script>
        const baseUrl = 'https://discover.shopifyapps.com/global/v1/search?';

        // Helper function to escape HTML
        function escapeHtml(text) {
            const map = {
                '&': '&amp;',
                '<': '&lt;',
                '>': '&gt;',
                '"': '&quot;',
                "'": '&#039;'
            };
            return text.replace(/[&<>"']/g, (m) => map[m]);
        }

        // Get all filter inputs
        const filters = [
            'query', 'limit', 'min_price', 'max_price', 'categories',
            'ships_to', 'ships_from', 'available_for_sale', 'context',
            'include_secondhand', 'shop_ids'
        ];

        // Add event listeners to all inputs
        filters.forEach(filterId => {
            const element = document.getElementById(filterId);
            element.addEventListener('input', updateUrl);
            element.addEventListener('change', updateUrl);
        });

        function updateUrl() {
            const params = new URLSearchParams();

            filters.forEach(filterId => {
                const element = document.getElementById(filterId);
                const value = element.value.trim();
                
                if (value) {
                    params.append(filterId, value);
                }
            });

            const fullUrl = baseUrl + params.toString();
            document.getElementById('urlDisplay').textContent = fullUrl;
        }

        // Modal functions
        function showTokenModal(event) {
            event.preventDefault();
            const modal = document.getElementById('tokenModal');
            modal.style.display = 'block';
            
            // Apply syntax highlighting to the code block in the modal
            setTimeout(() => {
                modal.querySelectorAll('pre code').forEach((block) => {
                    hljs.highlightElement(block);
                });
            }, 0);
        }

        function closeTokenModal() {
            document.getElementById('tokenModal').style.display = 'none';
        }

        // Close modal when clicking outside of it
        window.onclick = function(event) {
            const modal = document.getElementById('tokenModal');
            if (event.target === modal) {
                modal.style.display = 'none';
            }
        }

        // Close modal on Escape key
        document.addEventListener('keydown', function(event) {
            if (event.key === 'Escape') {
                const modal = document.getElementById('tokenModal');
                if (modal.style.display === 'block') {
                    modal.style.display = 'none';
                }
            }
        });

        async function copyTokenCommand(btn) {
            const curlCommand = `curl --request POST \\
  --url https://api.shopify.com/auth/access_token \\
  --header 'Content-Type: application/json' \\
  --data '{
    "client_id": "94f3d5e8c597277a8dc781d61cec4406",
    "client_secret": "d3344c26514c7425bed3c386ff15b378",
    "grant_type": "client_credentials"
  }'`;

            try {
                await navigator.clipboard.writeText(curlCommand);
                const originalText = btn.textContent;
                btn.textContent = '‚úÖ Copied!';
                setTimeout(() => {
                    btn.textContent = originalText;
                }, 2000);
            } catch (err) {
                console.error('Copy error:', err);
                alert('Failed to copy command: ' + err.message);
            }
        }

        async function runApiRequest(btn) {
            const token = document.getElementById('token').value;
            const url = document.getElementById('urlDisplay').textContent;
            const responseDisplay = document.getElementById('responseDisplay');

            // Check if token is provided
            if (!token || token.trim() === '') {
                alert('Please enter or generate an API token first.');
                return;
            }

            // Disable button and show loading
            btn.disabled = true;
            const originalText = btn.textContent;
            btn.textContent = '‚è≥ Running...';
            responseDisplay.innerHTML = '<pre style="padding: 12px;"><span class="loading">Executing API request...</span></pre>';

            try {
                // Use the hidden proxy to bypass CORS restrictions
                const response = await fetch('/api/http', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        url: url,
                        method: 'GET',
                        headers: {
                            'Authorization': `Bearer ${token}`,
                            'Content-Type': 'application/json'
                        }
                    })
                });

                // Get the response text
                const responseText = await response.text();
                let formattedResponse;
                let statusCode = response.status;
                let statusText = response.statusText;

                try {
                    // Try to parse and pretty-print JSON
                    const jsonData = JSON.parse(responseText);
                    formattedResponse = JSON.stringify(jsonData, null, 2);
                    
                    // If the proxy returns a response object with status info, extract it
                    if (jsonData.status !== undefined) {
                        statusCode = jsonData.status;
                        statusText = jsonData.statusText || '';
                        if (jsonData.data) {
                            formattedResponse = JSON.stringify(jsonData.data, null, 2);
                        }
                    }
                } catch (e) {
                    // If not JSON, display as-is
                    formattedResponse = responseText;
                }

                // Display response with status and syntax highlighting
                const statusColor = response.ok ? '#00E0A3' : '#EF4444';
                responseDisplay.innerHTML = `
                    <div class="response-status" style="color: ${statusColor};">Status: ${statusCode} ${statusText}</div>
                    <pre><code class="language-json">${escapeHtml(formattedResponse)}</code></pre>
                `;
                
                // Apply syntax highlighting
                responseDisplay.querySelectorAll('pre code').forEach((block) => {
                    hljs.highlightElement(block);
                });
                
                btn.textContent = '‚úÖ Done!';
                setTimeout(() => {
                    btn.textContent = originalText;
                }, 2000);
            } catch (error) {
                console.error('Error running API request:', error);
                responseDisplay.innerHTML = `<div class="response-status" style="color: #EF4444;">Error</div><pre style="padding: 12px;">${escapeHtml(error.message)}</pre>`;
                btn.textContent = '‚ùå Failed';
                setTimeout(() => {
                    btn.textContent = originalText;
                }, 2000);
            } finally {
                // Re-enable button
                btn.disabled = false;
            }
        }

        async function generateAndCopyShortUrl(event) {
            event.preventDefault();
            const fullUrl = document.getElementById('urlDisplay').textContent;
            const link = event.target;
            const originalText = link.textContent;
            
            // Show loading state
            link.textContent = '‚è≥ Generating...';
            link.style.pointerEvents = 'none';

            try {
                // Using TinyURL API
                const response = await fetch(`https://tinyurl.com/api-create.php?url=${encodeURIComponent(fullUrl)}`);
                
                if (!response.ok) {
                    throw new Error('Failed to shorten URL');
                }

                const shortUrl = await response.text();
                
                // Copy to clipboard
                await navigator.clipboard.writeText(shortUrl);
                
                // Show success message
                link.textContent = '‚úÖ Copied!';
                alert(`Short URL copied to clipboard:\n\n${shortUrl}`);
                
                // Reset link after delay
                setTimeout(() => {
                    link.textContent = originalText;
                    link.style.pointerEvents = 'auto';
                }, 2000);
            } catch (error) {
                console.error('Error generating short URL:', error);
                link.textContent = originalText;
                link.style.pointerEvents = 'auto';
                alert('‚ùå Failed to generate short URL. Please try again.');
            }
        }

        function copyUrl(btn) {
            const url = document.getElementById('urlDisplay').textContent;
            navigator.clipboard.writeText(url).then(() => {
                const originalText = btn.textContent;
                btn.textContent = '‚úÖ Copied!';
                setTimeout(() => {
                    btn.textContent = originalText;
                }, 2000);
            }).catch(err => {
                console.error('Copy error:', err);
                alert('Failed to copy URL: ' + err.message);
            });
        }

        // Initialize URL display on page load
        updateUrl();
    </script>
</body>
</html>

